#!/usr/bin/env sh

# reference: https://macos-defaults.com/

osascript -e 'tell application "System Preferences" to quit'

# finder
chflags nohidden ~/Library
defaults write NSGlobalDomain AppleShowAllExtensions -bool true

# dock
defaults write com.apple.dock orientation -string left 
defaults write com.apple.dock tilesize -int 47 
defaults write com.apple.dock autohide -bool true
defaults write com.apple.finder ShowPathbar -bool true
defaults write com.apple.finder _FXSortFoldersFirst -bool true

# keyboard
defaults write ApplePressAndHoldEnabled -bool false
defaults write Apple\ Global\ Domain KeyRepeat -int 2

# screenshot
defaults write com.apple.screencapture location ~/Downloads

# appearance
defaults write Apple\ Global\ Domain AppleReduceDesktopTinting -int 1
defaults write Apple\ Global\ Domain AppleShowScrollBar -string WhenScrolling

# Kill affected applications
for app in "Activity Monitor" \
  "cfprefsd" \
  "Dock" \
  "Finder" \
  "SystemUIServer"; do
  killall "${app}" &> /dev/null
done
